# 도서관 관리 시스템 과제 — 구현 체크리스트 (내가 앞으로 해야 할 것들)

> 목표: 터미널(콘솔) 기반 도서관 **대출/반납 관리 시스템**  
> 전략: “로그인/권한 + 요청큐 + 도서/대출 기능 + 저장/복원” 순서로 층층이 구현

---

## 0. 프로젝트 구조(모듈 분리) — 필수
- [ ] `main.py` : 프로그램 엔트리포인트(부팅, 루프, 세션, 메뉴 분기)
- [ ] `console.py` : 입력/출력(UI)만 담당 (`ask_int`, `ask_str`, `system/success/error`, 메뉴 출력)
- [ ] `models.py` : 도메인 모델(`Book`, `Member`, (선택) `BookRequest`)
- [ ] `library.py` : 도메인 로직(회원/도서/대출/반납/검색/요청 승인 등)
- [ ] `exceptions.py` : 도메인 예외 통일(`DomainError` 계열)
- [ ] (심화) `storage.py` : 파일 입출력(books.csv 로드, json 저장/복원)

---

## 1. 시작(부팅) 흐름 — 필수
- [ ] `bootstrap_library()`
  - [ ] `books.csv` 로드하여 초기 도서 목록 등록 (**필수 요구 사항**)
  - [ ] (선택) 상태 복원(JSON) 기능이 있으면 여기서 로드
  - [ ] 하드코딩 admin 계정 생성(`admin/admin1234`, role=`admin`)

---

## 2. 세션(로그인/회원가입) + 권한 분기 — 선택(하지만 내가 목표로 잡은 기능)
### 2-1) 회원가입(Signup)
- [ ] 입력: `member_id`, `name`, `phone`, `password`
- [ ] 도메인 규칙(= `Library.register_member()`):
  - [ ] `member_id` 중복 불가
  - [ ] `phone` 형식: `010-0000-0000` 또는 숫자만 입력 허용 → 내부 저장은 `010-0000-0000`로 표준화
  - [ ] `password` 길이: 4~13
- [ ] 성공 메시지 출력

### 2-2) 로그인(Login)
- [ ] 입력: `member_id`, `password`
- [ ] 도메인 규칙(= `Library.login()`):
  - [ ] ID 존재 확인
  - [ ] 비밀번호 일치 확인
- [ ] 성공 시 `current_user` 설정(세션 유지)

### 2-3) 메뉴 분기
- [ ] `current_user.role == "admin"` → 관리자 메뉴
- [ ] 그 외 → 회원 메뉴
- [ ] 로그아웃 → `current_user = None` → 시작 화면으로 복귀

---

## 3. 도서 관리(Books) — 필수 + 심화(요청큐)
### 3-1) 도서 등록 — 필수 기능
- [ ] 입력: `title`, `author`, `isbn`
- [ ] 도메인 규칙:
  - [ ] ISBN 중복 불가
  - [ ] 빈 값 금지
- [ ] 저장: `books: dict[str, Book]` (`isbn`이 key)

### 3-2) 도서 목록 출력 — 필수 기능
- [ ] 모든 책 출력
- [ ] 상태 표기 필수: `[대출가능]` / `[대출중]`
- [ ] 출력 정렬: `title.lower()` 기준 오름차순

### 3-3) 도서 검색 — 필수 기능
- [ ] 입력: 제목 일부(query)
- [ ] 포함 검색(부분 문자열 매칭)
- [ ] 결과 리스트 출력(상태 포함)

---

## 4. 회원 관리(Members) — 필수 기능
### 4-1) 회원 등록(회원가입과 별개로 “관리 기능”으로도 가능)
- [ ] 과제 요구사항에 따라 “회원 등록 메뉴”가 따로 존재해야 한다면:
  - [ ] 입력: 이름, 전화번호(그리고 내가 확장한 member_id/password)
  - [ ] members 저장: `members: dict[str, Member]`

---

## 5. 대출/반납(Loans) — 필수 기능
### 5-1) 도서 대출 — 필수
- [ ] 입력: `member_id(or name)`, `isbn`
- [ ] 도메인 규칙(= `Library.borrow_book()`):
  - [ ] 회원 존재 확인
  - [ ] 책 존재 확인
  - [ ] 책이 대출 가능한 상태인지 확인
- [ ] 처리: `Book.borrowed_by = member_id`
- [ ] 성공 메시지 출력

### 5-2) 도서 반납 — 필수
- [ ] 입력: `member_id`, `isbn`
- [ ] 도메인 규칙(= `Library.return_book()`):
  - [ ] 책 존재 확인
  - [ ] 해당 회원이 빌린 책인지 확인(`book.borrowed_by == member_id`)
- [ ] 처리: `Book.borrowed_by = None`
- [ ] 성공 메시지 출력

### 5-3) 내 대출 확인 — 내가 추가한 기능(선택)
- [ ] 현재 로그인 유저의 `member_id`로
- [ ] `borrowed_by == member_id` 인 책 목록 출력

### 5-4) (관리자) 현재 대출 목록 — 내가 추가한 기능(선택)
- [ ] `borrowed_by is not None` 인 책 목록 출력
- [ ] (선택) 누가 빌렸는지 함께 표시

---

## 6. “도서 등록 요청 → 관리자 승인” (요청 큐) — 내가 추가한 심화 기능
### 6-1) 회원: 도서 등록 요청 생성
- [ ] 입력: `title`, `author`, `isbn`
- [ ] 저장: `requests` 큐에 추가 (예: `BookRequest`)
- [ ] 성공 메시지 출력

### 6-2) 관리자: 요청 목록 확인/승인/거절
- [ ] 요청 목록 조회
- [ ] 승인 시:
  - [ ] requests에서 제거
  - [ ] books에 Book 추가
- [ ] 거절 시:
  - [ ] requests에서 제거
- [ ] 메시지 출력

---

## 7. File I/O — 필수 + 심화
### 7-1) books.csv 로드 — 필수
- [ ] 프로그램 시작 시 자동 수행
- [ ] `csv` 모듈로 읽어서 `Book` 객체 생성 → `books`에 등록

### 7-2) 데이터 영구 저장/복원(JSON 등) — 심화
- [ ] 종료 시 상태 저장:
  - [ ] 회원 정보(`members`)
  - [ ] 도서 상태(`borrowed_by`)
  - [ ] 요청 큐(`requests`)
- [ ] 시작 시 상태 복원:
  - [ ] 저장 파일 존재하면 로드하여 복원
  - [ ] 없으면 기본 초기화(books.csv만)

---

## 8. 예외 처리(프로그램이 죽지 않게) — 필수
- [ ] UI 입력 오류: 숫자 입력에 문자 등 → `console.ask_*`에서 재시도
- [ ] 도메인 오류: 존재하지 않는 회원/책, 대출중 대출 시도 등 → `Library`에서 예외 raise
- [ ] handlers/main에서 `DomainError` 잡아 `ui.error()` 출력 후 루프 계속

---

## 9. 최종 제출(PR) — 필수
- [ ] 브랜치 생성: `aws13th-본인이름`
- [ ] 기능 구현 후 커밋
- [ ] `git push origin aws13th-본인이름`
- [ ] 원본 레포로 PR 생성
  - [ ] 제목: `[이름] 도서관 관리 시스템 과제 제출`
  - [ ] 본문: 구현한 기능, 어려웠던 점, 추가 심화(요청큐/저장 등) 설명

---

## 추천 구현 순서(완주 우선)
1) books.csv 로드 + 도서 목록/검색
2) 회원 등록(기본) + 대출/반납
3) 로그인/권한(내 확장) 붙이기
4) 요청큐(회원 요청 → 관리자 승인)
5) JSON 저장/복원(심화)
6) 출력 포맷/예외 메시지 정리(마무리)

